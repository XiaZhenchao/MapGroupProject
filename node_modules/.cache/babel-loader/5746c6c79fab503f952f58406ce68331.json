{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\haosh\\\\desktop\\\\CSE416 projec\\\\MapGroupProject\\\\src\\\\App.js\";\nimport 'leaflet/dist/leaflet.css'; // Import Leaflet CSS\nimport 'leaflet-omnivore'; // Import Leaflet Omnivore\nimport L from 'leaflet'; // Import Leaflet\nimport React from 'react';\nimport './App.css';\nimport toGeoJSON from 'togeojson';\nimport { DOMParser } from 'xmldom';\nimport shp from 'shpjs'; // Import the shpjs library\nimport { open } from 'shapefile';\nimport dbf from 'dbf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSelectFileButton = () => {\n      const fileInput = document.getElementById('fileInput');\n      fileInput.accept = '.zip,.shp,.json,.kml, .dbf';\n      fileInput.click();\n    };\n    this.handleFileInputChange = () => {\n      const fileInput = document.getElementById('fileInput');\n      const selectedFile = fileInput.files[0];\n      if (selectedFile) {\n        const fileName = selectedFile.name;\n        const fileExtension = fileName.split('.').pop().toLowerCase();\n        if (fileExtension === 'shp' || fileExtension === 'json' || fileExtension === 'kml' || fileExtension === 'dbf') {\n          this.setState({\n            selectedFile\n          });\n          const uploadButton = document.getElementById('Select-File-Button');\n          uploadButton.disabled = true;\n          this.loadMap(selectedFile);\n          this.setState({\n            fileExtension: fileExtension\n          });\n        } else if (fileExtension === 'zip') {\n          this.setState({\n            selectedFile\n          });\n          const uploadButton = document.getElementById('Select-File-Button');\n          uploadButton.disabled = true;\n          this.loadMap(selectedFile);\n          this.setState({\n            fileExtension: fileExtension\n          });\n        } else {\n          alert('Please select a valid SHP, GeoJSON, or KML file.');\n        }\n      } else {\n        this.setState({\n          selectedFile: null\n        });\n        const uploadButton = document.getElementById('Select-File-Button');\n        uploadButton.disabled = false;\n      }\n      if (fileInput.files.length > 1) {\n        const selectedFile1 = fileInput.files[1];\n        const fileName1 = selectedFile.name;\n        const fileExtension1 = fileName1.split('.').pop().toLowerCase();\n        if (fileExtension1 === 'dbf') {\n          this.setState({\n            dbfFile: selectedFile1\n          });\n        }\n      }\n    };\n    this.handleRenderButtonClick = () => {\n      this.setState({\n        rendering: true\n      });\n      if (this.state.fileExtension === \"json\") {\n        this.renderGeoJSON();\n      }\n      if (this.state.fileExtension === \"kml\") {\n        this.renderKMLFile();\n      }\n      if (this.state.fileExtension === \"shp\") {\n        this.renderShpFile();\n      }\n    };\n    this.handleCancelClick = () => {\n      const fileInput = document.getElementById('fileInput');\n      fileInput.value = '';\n      const container = document.getElementById('Container');\n      container.innerHTML = '';\n      if (this.state.map) {\n        this.state.map.remove(); // Remove the old map\n      }\n\n      this.setState({\n        selectedFile: null,\n        map: null\n      });\n      this.handleFileInputChange();\n    };\n    this.loadMap = selectedFile => {\n      try {\n        // Create a Leaflet map\n        const map = L.map('Container').setView([0, 0], 5); // Set initial view\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          attribution: '&copy; < a href=\" \">OpenStreetMap</ a> contributors'\n        }).addTo(map);\n        // Store the new map instance in the component state\n        this.setState({\n          map: map\n        });\n      } catch (error) {\n        console.error('Error handle loading SHP file:', error);\n      }\n    };\n    // renderShpFile = () => {\n    //     const reader = new FileReader();\n    //     if (this.state.map) {\n    //       const map = this.state.map;\n    //       reader.onload = async (e) => {\n    //         try {\n    //           const shpData = await open(e.target.result); // Parse the Shapefile\n    //           // Initialize an empty array to collect GeoJSON features\n    //           const features = [];\n    //           // Iterate through each feature and add it to the 'features' array\n    //           while (true) {\n    //             const { done, value } = await shpData.read();\n    //             if (done) break;\n    //             features.push(value);\n    //           }\n    //           // Create a GeoJSON feature collection\n    //           const geojsonData = {\n    //             type: 'FeatureCollection',\n    //             features: features,\n    //           };\n    //           // Create a GeoJSON layer and add it to the map\n    //           const geojsonLayer = L.geoJSON(geojsonData).addTo(map);\n    //           // Fit the map bounds to the GeoJSON layer\n    //           map.fitBounds(geojsonLayer.getBounds());\n    //         } catch (error) {\n    //           console.error('Error rendering Shapefile:', error);\n    //         }\n    //       };\n    //       // Read the selected file as an ArrayBuffer\n    //       reader.readAsArrayBuffer(this.state.selectedFile);\n    //     }\n    //   };\n    this.parseDBF = dbfData => {\n      // Parse the DBF data to extract attributes\n      const records = dbf(dbfData).records;\n      return records;\n    };\n    this.renderShpFile = () => {\n      const reader = new FileReader();\n      if (this.state.map) {\n        const map = this.state.map;\n        reader.onload = async e => {\n          try {\n            const shpBuffer = e.target.result;\n            const dbfBuffer = this.state.fileExtension1; // Load your DBF file as an ArrayBuffer\n\n            // Parse the SHP and DBF data\n            const {\n              geometries\n            } = await shp(shpBuffer);\n            const attributes = parseDBF(dbfBuffer);\n\n            // Map attributes to geometries\n            const features = geometries.map((geometry, index) => {\n              return {\n                type: 'Feature',\n                properties: attributes[index],\n                geometry: geometry\n              };\n            });\n\n            // Create a GeoJSON feature collection\n            const geojsonData = {\n              type: 'FeatureCollection',\n              features: features\n            };\n\n            // Create a GeoJSON layer and add it to the map\n            const geojsonLayer = L.geoJSON(geojsonData).addTo(map);\n\n            // Fit the map bounds to the GeoJSON layer\n            map.fitBounds(geojsonLayer.getBounds());\n          } catch (error) {\n            console.error('Error rendering Shapefile:', error);\n          }\n        };\n\n        // Read the selected file as an ArrayBuffer\n        reader.readAsArrayBuffer(this.state.selectedFile);\n      }\n    };\n    this.renderGeoJSON = () => {\n      const reader = new FileReader();\n      if (this.state.map) {\n        const map = this.state.map;\n        reader.onload = e => {\n          try {\n            const geojsonData = JSON.parse(e.target.result); // Parse as GeoJSON\n            // Create a GeoJSON layer and bind labels as popups to all features\n            const geojsonLayer = L.geoJSON(geojsonData, {\n              onEachFeature: function (feature, layer) {\n                // Check if the feature has a 'name' property (replace 'name' with the actual property name containing region names)\n                if (feature.properties && feature.properties.name_en) {\n                  layer.bindPopup(feature.properties.name_en);\n                }\n              }\n            }).addTo(map);\n\n            // Fit the map bounds to the GeoJSON layer\n            map.fitBounds(geojsonLayer.getBounds());\n          } catch (error) {\n            console.error('Error rendering GeoJSON:', error);\n          }\n        };\n        // Read the selected file as text\n        reader.readAsText(this.state.selectedFile);\n      }\n      ;\n    };\n    this.renderKMLFile = () => {\n      const reader = new FileReader();\n      if (this.state.map) {\n        const map = this.state.map;\n        reader.onload = e => {\n          // Read the file content\n          const kmlContent = e.target.result;\n          // Parse the KML data into a GeoJSON object.\n          const geojson = toGeoJSON.kml(new DOMParser().parseFromString(kmlContent, 'text/xml'));\n          // Convert KML to GeoJSON using togeojson library\n          const geojsonLayer = L.geoJSON(geojson, {\n            onEachFeature: function (feature, layer) {\n              // Check if the feature has a 'name' property (replace 'name' with the actual property name containing region names)\n              if (feature.properties && feature.properties.name_en) {\n                layer.bindPopup(feature.properties.name_en);\n              }\n            }\n          }).addTo(map);\n\n          // Fit the map bounds to the GeoJSON layer\n          map.fitBounds(geojsonLayer.getBounds());\n        };\n        reader.readAsText(this.state.selectedFile);\n      }\n    };\n    this.state = {\n      selectedFile: null,\n      map: null,\n      rendering: false,\n      fileExtension: null\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"root\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"TitleBox\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Map\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        style: {\n          display: 'none'\n        },\n        accept: \".shp, .json, .kml, .dbf\",\n        multiple: true,\n        onChange: this.handleFileInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"Select-File-Button\",\n          onClick: this.handleSelectFileButton,\n          disabled: !!this.state.selectedFile,\n          children: \"Select File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"Render-File-Button\",\n          onClick: this.handleRenderButtonClick,\n          disabled: !this.state.selectedFile,\n          children: \"Render\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this), this.state.selectedFile && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Selected File: \", this.state.selectedFile.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.handleCancelClick,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"Container\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["L","React","toGeoJSON","DOMParser","shp","open","dbf","jsxDEV","_jsxDEV","App","Component","constructor","props","handleSelectFileButton","fileInput","document","getElementById","accept","click","handleFileInputChange","selectedFile","files","fileName","name","fileExtension","split","pop","toLowerCase","setState","uploadButton","disabled","loadMap","alert","length","selectedFile1","fileName1","fileExtension1","dbfFile","handleRenderButtonClick","rendering","state","renderGeoJSON","renderKMLFile","renderShpFile","handleCancelClick","value","container","innerHTML","map","remove","setView","tileLayer","attribution","addTo","error","console","parseDBF","dbfData","records","reader","FileReader","onload","e","shpBuffer","target","result","dbfBuffer","geometries","attributes","features","geometry","index","type","properties","geojsonData","geojsonLayer","geoJSON","fitBounds","getBounds","readAsArrayBuffer","JSON","parse","onEachFeature","feature","layer","name_en","bindPopup","readAsText","kmlContent","geojson","kml","parseFromString","render","id","children","_jsxFileName","lineNumber","columnNumber","style","display","multiple","onChange","onClick"],"sources":["C:/Users/haosh/desktop/CSE416 projec/MapGroupProject/src/App.js"],"sourcesContent":["import 'leaflet/dist/leaflet.css'; // Import Leaflet CSS\r\nimport 'leaflet-omnivore'; // Import Leaflet Omnivore\r\nimport L from 'leaflet'; // Import Leaflet\r\nimport React from 'react';\r\nimport './App.css';\r\nimport toGeoJSON from 'togeojson';\r\nimport { DOMParser } from 'xmldom'; \r\nimport shp from 'shpjs'; // Import the shpjs library\r\nimport { open } from 'shapefile'; \r\nimport dbf from 'dbf';\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            selectedFile: null,\r\n            map: null,\r\n            rendering: false,\r\n            fileExtension: null,\r\n        };\r\n    }\r\n\r\n    handleSelectFileButton = () => {\r\n        const fileInput = document.getElementById('fileInput');\r\n        fileInput.accept = '.zip,.shp,.json,.kml, .dbf';\r\n        fileInput.click();\r\n    };\r\n\r\n    handleFileInputChange = () => {\r\n        const fileInput = document.getElementById('fileInput');\r\n        const selectedFile = fileInput.files[0];\r\n        if (selectedFile) {\r\n            const fileName = selectedFile.name;\r\n            const fileExtension = fileName.split('.').pop().toLowerCase();\r\n\r\n            if (fileExtension === 'shp' || fileExtension === 'json' || fileExtension === 'kml' || fileExtension === 'dbf'){\r\n                this.setState({ selectedFile });\r\n                const uploadButton = document.getElementById('Select-File-Button');\r\n                uploadButton.disabled = true;\r\n                this.loadMap(selectedFile);\r\n                this.setState({ fileExtension: fileExtension })\r\n            } else if (fileExtension === 'zip') {\r\n                this.setState({ selectedFile });\r\n                const uploadButton = document.getElementById('Select-File-Button');\r\n                uploadButton.disabled = true;\r\n                this.loadMap(selectedFile);\r\n                this.setState({ fileExtension: fileExtension })\r\n            }\r\n            else {\r\n                alert('Please select a valid SHP, GeoJSON, or KML file.');\r\n            }\r\n        } else {\r\n            this.setState({ selectedFile: null });\r\n            const uploadButton = document.getElementById('Select-File-Button');\r\n            uploadButton.disabled = false;\r\n        }\r\n        if(fileInput.files.length>1){\r\n            const selectedFile1 = fileInput.files[1];\r\n            const fileName1 = selectedFile.name;\r\n            const fileExtension1 = fileName1.split('.').pop().toLowerCase();\r\n\r\n            if (fileExtension1 === 'dbf'){\r\n                this.setState({ dbfFile: selectedFile1 });\r\n            }\r\n        }\r\n    };\r\n    handleRenderButtonClick = () => {\r\n        this.setState({ rendering: true });\r\n        if(this.state.fileExtension===\"json\"){\r\n            this.renderGeoJSON();\r\n        }\r\n        if(this.state.fileExtension===\"kml\"){\r\n            this.renderKMLFile();\r\n        }\r\n        if(this.state.fileExtension===\"shp\"){\r\n            this.renderShpFile();\r\n        }\r\n    };\r\n\r\n    handleCancelClick = () => {\r\n        const fileInput = document.getElementById('fileInput');\r\n        fileInput.value = '';\r\n        const container = document.getElementById('Container');\r\n        container.innerHTML = '';\r\n        \r\n        if(this.state.map){\r\n            this.state.map.remove(); // Remove the old map\r\n            }       \r\n        this.setState({ selectedFile: null, map: null });\r\n        this.handleFileInputChange();\r\n    };\r\n\r\n    loadMap = (selectedFile) => {\r\n        try {\r\n            // Create a Leaflet map\r\n            const map = L.map('Container').setView([0, 0], 5); // Set initial view\r\n            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n                attribution: '&copy; < a href=\" \">OpenStreetMap</ a> contributors',\r\n            }).addTo(map);\r\n            // Store the new map instance in the component state\r\n            this.setState({ map: map });\r\n        } catch (error) {\r\n            console.error('Error handle loading SHP file:', error);\r\n        }\r\n    };\r\n\r\n\r\n    // renderShpFile = () => {\r\n    //     const reader = new FileReader();\r\n    //     if (this.state.map) {\r\n    //       const map = this.state.map;\r\n    //       reader.onload = async (e) => {\r\n    //         try {\r\n    //           const shpData = await open(e.target.result); // Parse the Shapefile\r\n      \r\n    //           // Initialize an empty array to collect GeoJSON features\r\n    //           const features = [];\r\n      \r\n    //           // Iterate through each feature and add it to the 'features' array\r\n    //           while (true) {\r\n    //             const { done, value } = await shpData.read();\r\n    //             if (done) break;\r\n    //             features.push(value);\r\n    //           }\r\n      \r\n    //           // Create a GeoJSON feature collection\r\n    //           const geojsonData = {\r\n    //             type: 'FeatureCollection',\r\n    //             features: features,\r\n    //           };\r\n      \r\n    //           // Create a GeoJSON layer and add it to the map\r\n    //           const geojsonLayer = L.geoJSON(geojsonData).addTo(map);\r\n      \r\n    //           // Fit the map bounds to the GeoJSON layer\r\n    //           map.fitBounds(geojsonLayer.getBounds());\r\n    //         } catch (error) {\r\n    //           console.error('Error rendering Shapefile:', error);\r\n    //         }\r\n    //       };\r\n      \r\n    //       // Read the selected file as an ArrayBuffer\r\n    //       reader.readAsArrayBuffer(this.state.selectedFile);\r\n    //     }\r\n    //   };\r\n    parseDBF = (dbfData) => {\r\n        // Parse the DBF data to extract attributes\r\n        const records = dbf(dbfData).records;\r\n        return records;\r\n      };\r\n      \r\n    renderShpFile = () => {\r\n        const reader = new FileReader();\r\n        if (this.state.map) {\r\n          const map = this.state.map;\r\n          reader.onload = async (e) => {\r\n            try {\r\n              const shpBuffer = e.target.result;\r\n              const dbfBuffer = this.state.fileExtension1; // Load your DBF file as an ArrayBuffer\r\n              \r\n              // Parse the SHP and DBF data\r\n              const { geometries } = await shp(shpBuffer);\r\n              const attributes = parseDBF(dbfBuffer);\r\n              \r\n              // Map attributes to geometries\r\n              const features = geometries.map((geometry, index) => {\r\n                return {\r\n                  type: 'Feature',\r\n                  properties: attributes[index],\r\n                  geometry: geometry\r\n                };\r\n              });\r\n      \r\n              // Create a GeoJSON feature collection\r\n              const geojsonData = {\r\n                type: 'FeatureCollection',\r\n                features: features,\r\n              };\r\n      \r\n              // Create a GeoJSON layer and add it to the map\r\n              const geojsonLayer = L.geoJSON(geojsonData).addTo(map);\r\n      \r\n              // Fit the map bounds to the GeoJSON layer\r\n              map.fitBounds(geojsonLayer.getBounds());\r\n            } catch (error) {\r\n              console.error('Error rendering Shapefile:', error);\r\n            }\r\n          };\r\n      \r\n          // Read the selected file as an ArrayBuffer\r\n          reader.readAsArrayBuffer(this.state.selectedFile);\r\n        }\r\n      };\r\n\r\n\r\n    renderGeoJSON = () => {\r\n        const reader = new FileReader();\r\n        if (this.state.map) {\r\n            const map = this.state.map;\r\n            reader.onload = (e) => {\r\n                try {\r\n                    const geojsonData = JSON.parse(e.target.result); // Parse as GeoJSON\r\n                    // Create a GeoJSON layer and bind labels as popups to all features\r\n                    const geojsonLayer = L.geoJSON(geojsonData, {\r\n                    onEachFeature: function (feature, layer) {\r\n                    // Check if the feature has a 'name' property (replace 'name' with the actual property name containing region names)\r\n                    if (feature.properties && feature.properties.name_en) {\r\n                       layer.bindPopup(feature.properties.name_en);\r\n                    }\r\n                },\r\n            }).addTo(map);\r\n    \r\n                    // Fit the map bounds to the GeoJSON layer\r\n                    map.fitBounds(geojsonLayer.getBounds());\r\n                }\r\n                catch (error) {\r\n                    console.error('Error rendering GeoJSON:', error);\r\n                }\r\n            }\r\n            // Read the selected file as text\r\n        reader.readAsText(this.state.selectedFile);\r\n        };\r\n    }\r\n\r\n\r\n    renderKMLFile = () => {\r\n        const reader = new FileReader();\r\n        if (this.state.map) {\r\n            const map = this.state.map;\r\n            reader.onload = (e) => {\r\n            // Read the file content\r\n            const kmlContent = e.target.result;\r\n            // Parse the KML data into a GeoJSON object.\r\n            const geojson = toGeoJSON.kml(new DOMParser().parseFromString(kmlContent, 'text/xml'));\r\n            // Convert KML to GeoJSON using togeojson library\r\n            const geojsonLayer = L.geoJSON(geojson, {\r\n                onEachFeature: function (feature, layer) {\r\n                // Check if the feature has a 'name' property (replace 'name' with the actual property name containing region names)\r\n                if (feature.properties && feature.properties.name_en) {\r\n                   layer.bindPopup(feature.properties.name_en);\r\n                }\r\n                },\r\n              }).addTo(map);\r\n      \r\n            // Fit the map bounds to the GeoJSON layer\r\n            map.fitBounds(geojsonLayer.getBounds());\r\n            }\r\n        reader.readAsText(this.state.selectedFile);\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"root\">\r\n                <div id=\"TitleBox\">\r\n                    <h1>Map</h1>\r\n                </div>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"fileInput\"\r\n                    style={{ display: 'none' }}\r\n                    accept=\".shp, .json, .kml, .dbf\"\r\n                    multiple\r\n                    onChange={this.handleFileInputChange}\r\n                />\r\n                {(\r\n                <div>\r\n                <button\r\n                    id=\"Select-File-Button\"\r\n                    onClick={this.handleSelectFileButton}\r\n                    disabled={!!this.state.selectedFile}\r\n                >\r\n                    Select File\r\n                </button>\r\n                <button\r\n                    id=\"Render-File-Button\"\r\n                    onClick={this.handleRenderButtonClick}\r\n                    disabled={!this.state.selectedFile}\r\n                >\r\n                    Render\r\n                </button>\r\n                </div>\r\n                )}\r\n                \r\n                {this.state.selectedFile && (\r\n                    <div>\r\n                        <p>Selected File: {this.state.selectedFile.name}</p >\r\n                        <button onClick={this.handleCancelClick}>Cancel</button>\r\n                    </div>\r\n                )}\r\n                <div id=\"Container\" ></div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}