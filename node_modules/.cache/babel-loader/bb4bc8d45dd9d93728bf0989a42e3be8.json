{"ast":null,"code":"import path from \"path-source\";\nimport array from \"array-source\";\nimport stream from \"stream-source\";\nimport dbf from \"./dbf/index\";\nimport shapefile from \"./shapefile/index\";\nimport shp from \"./shp/index\";\nexport function open(shp, dbf, options) {\n  if (typeof dbf === \"string\") {\n    if (!/\\.dbf$/.test(dbf)) dbf += \".dbf\";\n    dbf = path(dbf, options);\n  } else if (dbf instanceof ArrayBuffer || dbf instanceof Uint8Array) {\n    dbf = array(dbf);\n  } else if (dbf != null) {\n    dbf = stream(dbf);\n  }\n  if (typeof shp === \"string\") {\n    if (!/\\.shp$/.test(shp)) shp += \".shp\";\n    if (dbf === undefined) dbf = path(shp.substring(0, shp.length - 4) + \".dbf\", options).catch(function () {});\n    shp = path(shp, options);\n  } else if (shp instanceof ArrayBuffer || shp instanceof Uint8Array) {\n    shp = array(shp);\n  } else {\n    shp = stream(shp);\n  }\n  return Promise.all([shp, dbf]).then(function (sources) {\n    var shp = sources[0],\n      dbf = sources[1],\n      encoding = \"windows-1252\";\n    if (options && options.encoding != null) encoding = options.encoding;\n    return shapefile(shp, dbf, dbf && new TextDecoder(encoding));\n  });\n}\nexport function openShp(source, options) {\n  if (typeof source === \"string\") {\n    if (!/\\.shp$/.test(source)) source += \".shp\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(shp);\n}\nexport function openDbf(source, options) {\n  var encoding = \"windows-1252\";\n  if (options && options.encoding != null) encoding = options.encoding;\n  encoding = new TextDecoder(encoding);\n  if (typeof source === \"string\") {\n    if (!/\\.dbf$/.test(source)) source += \".dbf\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(function (source) {\n    return dbf(source, encoding);\n  });\n}\nexport function read(shp, dbf, options) {\n  return open(shp, dbf, options).then(function (source) {\n    var features = [],\n      collection = {\n        type: \"FeatureCollection\",\n        features: features,\n        bbox: source.bbox\n      };\n    return source.read().then(function read(result) {\n      if (result.done) return collection;\n      features.push(result.value);\n      return source.read().then(read);\n    });\n  });\n}","map":{"version":3,"names":["path","array","stream","dbf","shapefile","shp","open","options","test","ArrayBuffer","Uint8Array","undefined","substring","length","catch","Promise","all","then","sources","encoding","TextDecoder","openShp","source","resolve","openDbf","read","features","collection","type","bbox","result","done","push","value"],"sources":["/Users/zhenchaoxia/Desktop/WORK/Stony Brook/Fall 2023/CSE416/Group/MapGroupProject/node_modules/shapefile/index.js"],"sourcesContent":["import path from \"path-source\";\nimport array from \"array-source\";\nimport stream from \"stream-source\";\nimport dbf from \"./dbf/index\";\nimport shapefile from \"./shapefile/index\";\nimport shp from \"./shp/index\";\n\nexport function open(shp, dbf, options) {\n  if (typeof dbf === \"string\") {\n    if (!/\\.dbf$/.test(dbf)) dbf += \".dbf\";\n    dbf = path(dbf, options);\n  } else if (dbf instanceof ArrayBuffer || dbf instanceof Uint8Array) {\n    dbf = array(dbf);\n  } else if (dbf != null) {\n    dbf = stream(dbf);\n  }\n  if (typeof shp === \"string\") {\n    if (!/\\.shp$/.test(shp)) shp += \".shp\";\n    if (dbf === undefined) dbf = path(shp.substring(0, shp.length - 4) + \".dbf\", options).catch(function() {});\n    shp = path(shp, options);\n  } else if (shp instanceof ArrayBuffer || shp instanceof Uint8Array) {\n    shp = array(shp);\n  } else {\n    shp = stream(shp);\n  }\n  return Promise.all([shp, dbf]).then(function(sources) {\n    var shp = sources[0], dbf = sources[1], encoding = \"windows-1252\";\n    if (options && options.encoding != null) encoding = options.encoding;\n    return shapefile(shp, dbf, dbf && new TextDecoder(encoding));\n  });\n}\n\nexport function openShp(source, options) {\n  if (typeof source === \"string\") {\n    if (!/\\.shp$/.test(source)) source += \".shp\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(shp);\n}\n\nexport function openDbf(source, options) {\n  var encoding = \"windows-1252\";\n  if (options && options.encoding != null) encoding = options.encoding;\n  encoding = new TextDecoder(encoding);\n  if (typeof source === \"string\") {\n    if (!/\\.dbf$/.test(source)) source += \".dbf\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(function(source) {\n    return dbf(source, encoding);\n  });\n}\n\nexport function read(shp, dbf, options) {\n  return open(shp, dbf, options).then(function(source) {\n    var features = [], collection = {type: \"FeatureCollection\", features: features, bbox: source.bbox};\n    return source.read().then(function read(result) {\n      if (result.done) return collection;\n      features.push(result.value);\n      return source.read().then(read);\n    });\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}