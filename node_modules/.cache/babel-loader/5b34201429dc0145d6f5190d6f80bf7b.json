{"ast":null,"code":"export default function (record) {\n  var i = 44,\n    j,\n    n = record.getInt32(36, true),\n    m = record.getInt32(40, true),\n    parts = new Array(n),\n    points = new Array(m),\n    polygons = [],\n    holes = [];\n  for (j = 0; j < n; ++j, i += 4) parts[j] = record.getInt32(i, true);\n  for (j = 0; j < m; ++j, i += 16) points[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n  parts.forEach(function (i, j) {\n    var ring = points.slice(i, parts[j + 1]);\n    if (ringClockwise(ring)) polygons.push([ring]);else holes.push(ring);\n  });\n  holes.forEach(function (hole) {\n    polygons.some(function (polygon) {\n      if (ringContainsSome(polygon[0], hole)) {\n        polygon.push(hole);\n        return true;\n      }\n    }) || polygons.push([hole]);\n  });\n  return polygons.length === 1 ? {\n    type: \"Polygon\",\n    coordinates: polygons[0]\n  } : {\n    type: \"MultiPolygon\",\n    coordinates: polygons\n  };\n}\n;\nfunction ringClockwise(ring) {\n  if ((n = ring.length) < 4) return false;\n  var i = 0,\n    n,\n    area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\n  while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\n  return area >= 0;\n}\nfunction ringContainsSome(ring, hole) {\n  var i = -1,\n    n = hole.length,\n    c;\n  while (++i < n) {\n    if (c = ringContains(ring, hole[i])) {\n      return c > 0;\n    }\n  }\n  return false;\n}\nfunction ringContains(ring, point) {\n  var x = point[0],\n    y = point[1],\n    contains = -1;\n  for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\n    var pi = ring[i],\n      xi = pi[0],\n      yi = pi[1],\n      pj = ring[j],\n      xj = pj[0],\n      yj = pj[1];\n    if (segmentContains(pi, pj, point)) {\n      return 0;\n    }\n    if (yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi) {\n      contains = -contains;\n    }\n  }\n  return contains;\n}\nfunction segmentContains(p0, p1, p2) {\n  var x20 = p2[0] - p0[0],\n    y20 = p2[1] - p0[1];\n  if (x20 === 0 && y20 === 0) return true;\n  var x10 = p1[0] - p0[0],\n    y10 = p1[1] - p0[1];\n  if (x10 === 0 && y10 === 0) return false;\n  var t = (x20 * x10 + y20 * y10) / (x10 * x10 + y10 * y10);\n  return t < 0 || t > 1 ? false : t === 0 || t === 1 ? true : t * x10 === x20 && t * y10 === y20;\n}","map":{"version":3,"names":["record","i","j","n","getInt32","m","parts","Array","points","polygons","holes","getFloat64","forEach","ring","slice","ringClockwise","push","hole","some","polygon","ringContainsSome","length","type","coordinates","area","c","ringContains","point","x","y","contains","pi","xi","yi","pj","xj","yj","segmentContains","p0","p1","p2","x20","y20","x10","y10","t"],"sources":["C:/Users/haosh/desktop/CSE416 projec/MapGroupProject/node_modules/shapefile/shp/polygon.js"],"sourcesContent":["export default function(record) {\r\n  var i = 44, j, n = record.getInt32(36, true), m = record.getInt32(40, true), parts = new Array(n), points = new Array(m), polygons = [], holes = [];\r\n  for (j = 0; j < n; ++j, i += 4) parts[j] = record.getInt32(i, true);\r\n  for (j = 0; j < m; ++j, i += 16) points[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\r\n\r\n  parts.forEach(function(i, j) {\r\n    var ring = points.slice(i, parts[j + 1]);\r\n    if (ringClockwise(ring)) polygons.push([ring]);\r\n    else holes.push(ring);\r\n  });\r\n\r\n  holes.forEach(function(hole) {\r\n    polygons.some(function(polygon) {\r\n      if (ringContainsSome(polygon[0], hole)) {\r\n        polygon.push(hole);\r\n        return true;\r\n      }\r\n    }) || polygons.push([hole]);\r\n  });\r\n\r\n  return polygons.length === 1\r\n      ? {type: \"Polygon\", coordinates: polygons[0]}\r\n      : {type: \"MultiPolygon\", coordinates: polygons};\r\n};\r\n\r\nfunction ringClockwise(ring) {\r\n  if ((n = ring.length) < 4) return false;\r\n  var i = 0, n, area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\r\n  while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\r\n  return area >= 0;\r\n}\r\n\r\nfunction ringContainsSome(ring, hole) {\r\n  var i = -1, n = hole.length, c;\r\n  while (++i < n) {\r\n    if (c = ringContains(ring, hole[i])) {\r\n      return c > 0;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction ringContains(ring, point) {\r\n  var x = point[0], y = point[1], contains = -1;\r\n  for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\r\n    var pi = ring[i], xi = pi[0], yi = pi[1],\r\n        pj = ring[j], xj = pj[0], yj = pj[1];\r\n    if (segmentContains(pi, pj, point)) {\r\n      return 0;\r\n    }\r\n    if (((yi > y) !== (yj > y)) && ((x < (xj - xi) * (y - yi) / (yj - yi) + xi))) {\r\n      contains = -contains;\r\n    }\r\n  }\r\n  return contains;\r\n}\r\n\r\nfunction segmentContains(p0, p1, p2) {\r\n  var x20 = p2[0] - p0[0], y20 = p2[1] - p0[1];\r\n  if (x20 === 0 && y20 === 0) return true;\r\n  var x10 = p1[0] - p0[0], y10 = p1[1] - p0[1];\r\n  if (x10 === 0 && y10 === 0) return false;\r\n  var t = (x20 * x10 + y20 * y10) / (x10 * x10 + y10 * y10);\r\n  return t < 0 || t > 1 ? false : t === 0 || t === 1 ? true : t * x10 === x20 && t * y10 === y20;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}