{"ast":null,"code":"var fs = require(\"fs\");\nexports.reader = function (filename) {\n  var error,\n    fd,\n    position = 0,\n    buffer = new Buffer(40 * 1024),\n    next = noop;\n  fs.open(filename, \"r\", function (_error, _fd) {\n    if (_error) error = _error;else fd = _fd;\n    next();\n  });\n  return {\n    read: function read(bytes, callback) {\n      if (error) return callback(error), this;\n      if (!fd) return next = function () {\n        read(bytes, callback);\n      }, this;\n      if (buffer.length < bytes) buffer = new Buffer(1 << Math.ceil(Math.log(bytes) / Math.LN2));\n      (function readRemaining(offset) {\n        fs.read(fd, buffer, offset, bytes - offset, position, function (error, bytesRead) {\n          if (error) return fs.close(fd, function () {\n            callback(error);\n          }); // auto close on error\n          if (!bytesRead) return callback(null, end);\n          position += bytesRead;\n          if (offset + bytesRead < bytes) return readRemaining(offset + bytesRead);\n          callback(null, buffer);\n        });\n      })(0);\n      return this;\n    },\n    close: function close(callback) {\n      if (error) return callback(error), this;\n      if (!fd) return next = function () {\n        close(callback);\n      }, this;\n      fs.close(fd, callback);\n      return this;\n    }\n  };\n};\nvar end = exports.end = {};\nfunction noop() {}","map":{"version":3,"names":["fs","require","exports","reader","filename","error","fd","position","buffer","Buffer","next","noop","open","_error","_fd","read","bytes","callback","length","Math","ceil","log","LN2","readRemaining","offset","bytesRead","close","end"],"sources":["/Users/yongerfan/Desktop/GroupProject/MapGroupProject/node_modules/shapefile/file.js"],"sourcesContent":["var fs = require(\"fs\");\n\nexports.reader = function(filename) {\n  var error,\n      fd,\n      position = 0,\n      buffer = new Buffer(40 * 1024),\n      next = noop;\n\n  fs.open(filename, \"r\", function(_error, _fd) {\n    if (_error) error = _error;\n    else fd = _fd;\n    next();\n  });\n\n  return {\n    read: function read(bytes, callback) {\n      if (error) return callback(error), this;\n      if (!fd) return next = function() { read(bytes, callback); }, this;\n      if (buffer.length < bytes) buffer = new Buffer(1 << Math.ceil(Math.log(bytes) / Math.LN2));\n      (function readRemaining(offset) {\n        fs.read(fd, buffer, offset, bytes - offset, position, function(error, bytesRead) {\n          if (error) return fs.close(fd, function() { callback(error); }); // auto close on error\n          if (!bytesRead) return callback(null, end);\n          position += bytesRead;\n          if (offset + bytesRead < bytes) return readRemaining(offset + bytesRead);\n          callback(null, buffer);\n        });\n      })(0);\n      return this;\n    },\n    close: function close(callback) {\n      if (error) return callback(error), this;\n      if (!fd) return next = function() { close(callback); }, this;\n      fs.close(fd, callback);\n      return this;\n    }\n  };\n};\n\nvar end = exports.end = {};\n\nfunction noop() {}\n"],"mappings":"AAAA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AAEtBC,OAAO,CAACC,MAAM,GAAG,UAASC,QAAQ,EAAE;EAClC,IAAIC,KAAK;IACLC,EAAE;IACFC,QAAQ,GAAG,CAAC;IACZC,MAAM,GAAG,IAAIC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC;IAC9BC,IAAI,GAAGC,IAAI;EAEfX,EAAE,CAACY,IAAI,CAACR,QAAQ,EAAE,GAAG,EAAE,UAASS,MAAM,EAAEC,GAAG,EAAE;IAC3C,IAAID,MAAM,EAAER,KAAK,GAAGQ,MAAM,CAAC,KACtBP,EAAE,GAAGQ,GAAG;IACbJ,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEF,OAAO;IACLK,IAAI,EAAE,SAASA,IAAIA,CAACC,KAAK,EAAEC,QAAQ,EAAE;MACnC,IAAIZ,KAAK,EAAE,OAAOY,QAAQ,CAACZ,KAAK,CAAC,EAAE,IAAI;MACvC,IAAI,CAACC,EAAE,EAAE,OAAOI,IAAI,GAAG,SAAAA,CAAA,EAAW;QAAEK,IAAI,CAACC,KAAK,EAAEC,QAAQ,CAAC;MAAE,CAAC,EAAE,IAAI;MAClE,IAAIT,MAAM,CAACU,MAAM,GAAGF,KAAK,EAAER,MAAM,GAAG,IAAIC,MAAM,CAAC,CAAC,IAAIU,IAAI,CAACC,IAAI,CAACD,IAAI,CAACE,GAAG,CAACL,KAAK,CAAC,GAAGG,IAAI,CAACG,GAAG,CAAC,CAAC;MAC1F,CAAC,SAASC,aAAaA,CAACC,MAAM,EAAE;QAC9BxB,EAAE,CAACe,IAAI,CAACT,EAAE,EAAEE,MAAM,EAAEgB,MAAM,EAAER,KAAK,GAAGQ,MAAM,EAAEjB,QAAQ,EAAE,UAASF,KAAK,EAAEoB,SAAS,EAAE;UAC/E,IAAIpB,KAAK,EAAE,OAAOL,EAAE,CAAC0B,KAAK,CAACpB,EAAE,EAAE,YAAW;YAAEW,QAAQ,CAACZ,KAAK,CAAC;UAAE,CAAC,CAAC,CAAC,CAAC;UACjE,IAAI,CAACoB,SAAS,EAAE,OAAOR,QAAQ,CAAC,IAAI,EAAEU,GAAG,CAAC;UAC1CpB,QAAQ,IAAIkB,SAAS;UACrB,IAAID,MAAM,GAAGC,SAAS,GAAGT,KAAK,EAAE,OAAOO,aAAa,CAACC,MAAM,GAAGC,SAAS,CAAC;UACxER,QAAQ,CAAC,IAAI,EAAET,MAAM,CAAC;QACxB,CAAC,CAAC;MACJ,CAAC,EAAE,CAAC,CAAC;MACL,OAAO,IAAI;IACb,CAAC;IACDkB,KAAK,EAAE,SAASA,KAAKA,CAACT,QAAQ,EAAE;MAC9B,IAAIZ,KAAK,EAAE,OAAOY,QAAQ,CAACZ,KAAK,CAAC,EAAE,IAAI;MACvC,IAAI,CAACC,EAAE,EAAE,OAAOI,IAAI,GAAG,SAAAA,CAAA,EAAW;QAAEgB,KAAK,CAACT,QAAQ,CAAC;MAAE,CAAC,EAAE,IAAI;MAC5DjB,EAAE,CAAC0B,KAAK,CAACpB,EAAE,EAAEW,QAAQ,CAAC;MACtB,OAAO,IAAI;IACb;EACF,CAAC;AACH,CAAC;AAED,IAAIU,GAAG,GAAGzB,OAAO,CAACyB,GAAG,GAAG,CAAC,CAAC;AAE1B,SAAShB,IAAIA,CAAA,EAAG,CAAC"},"metadata":{},"sourceType":"script"}